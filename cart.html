<!-- cart.html -->
<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <link rel="shortcut icon" type="x-icon" href="Img\logo.png">
  <title>Graphic Zone-Online Store-Cart</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>

  <canvas id="snow-canvas"></canvas>
  
  <header class="navbar">
    <div class="logo">
        <img src="Img/logo.png" alt="Store Logo">
        <span>Graphic Zone Online Store</span>
    </div>

    <nav class="nav-links" id="navLinks">
        <a href="index.html">Home</a>
        <a href="products.html">Shop</a>
        <a href="cart.html" class="cart-btn">Cart üõí</a>
    </nav>

    <div class="menu-icon" onclick="toggleMenu()">‚ò∞</div>

    <button id="darkToggle">üåô</button>

</header>

  <main>
    <table id="cartTable" border="1" cellpadding="8" style="width:100%; max-width:800px; margin:20px auto;">
      <thead>
        <tr><th>Product</th><th>Price</th><th>Quantity</th><th>Subtotal</th><th>Action</th></tr>
      </thead>
      <tbody></tbody>
    </table>

    <h2 id="total" style="text-align:center">Total: Rs. 0</h2>

    <div style="text-align:center; margin:20px;">
      <a href="checkout.html" id="checkoutBtn" style="padding:10px 20px; background:green; color:white; text-decoration:none; border-radius:5px;">Proceed to Checkout</a>
    </div>
  </main>

  <script>
    function renderCart() {
      const cart = JSON.parse(localStorage.getItem('cart')) || [];
      const tbody = document.querySelector('#cartTable tbody');
      tbody.innerHTML = '';

      if (cart.length === 0) {
        tbody.innerHTML = '<tr><td colspan="5" style="text-align:center; color:gray;">Your cart is empty</td></tr>';
        document.getElementById('total').innerText = 'Total: Rs. 0';
        return;
      }

      let total = 0;
      cart.forEach((item, idx) => {
        const subtotal = (Number(item.price) * (item.quantity || 1));
        total += subtotal;

        const tr = document.createElement('tr');
        tr.innerHTML = `
          <td>${item.name}</td>
          <td>Rs. ${item.price}</td>
          <td>
            <input type="number" min="1" value="${item.quantity || 1}" data-index="${idx}" style="width:70px;">
          </td>
          <td>Rs. ${subtotal}</td>
          <td><button data-remove="${idx}">Remove</button></td>
        `;
        tbody.appendChild(tr);
      });

      document.getElementById('total').innerText = 'Total: Rs. ' + total;
    }

    // wire events
    document.addEventListener('input', function(e){
      if (e.target.matches('input[type="number"][data-index]')) {
        const idx = Number(e.target.dataset.index);
        const qty = Math.max(1, parseInt(e.target.value) || 1);
        const cart = JSON.parse(localStorage.getItem('cart')) || [];
        cart[idx].quantity = qty;
        localStorage.setItem('cart', JSON.stringify(cart));
        renderCart();
      }
    });

    document.addEventListener('click', function(e){
      if (e.target.matches('button[data-remove]')) {
        const idx = Number(e.target.dataset.remove);
        const cart = JSON.parse(localStorage.getItem('cart')) || [];
        cart.splice(idx, 1);
        localStorage.setItem('cart', JSON.stringify(cart));
        renderCart();
      }
    });

    // initial render
    renderCart();

    const toggleBtn = document.getElementById("darkToggle");

// Change mode on click
toggleBtn.addEventListener("click", () => {
    document.body.classList.toggle("dark-mode");

    if (document.body.classList.contains("dark-mode")) {
        toggleBtn.textContent = "‚òÄÔ∏è";
        localStorage.setItem("theme", "dark");
    } else {
        toggleBtn.textContent = "üåô";
        localStorage.setItem("theme", "light");
    }
});

// Load saved theme on refresh
window.onload = () => {
    if (localStorage.getItem("theme") === "dark") {
        document.body.classList.add("dark-mode");
        toggleBtn.textContent = "‚òÄÔ∏è";
    }
};


// snowing

document.addEventListener("DOMContentLoaded", function () {
    const canvas = document.getElementById("snow-canvas");
    const ctx = canvas.getContext("2d");

    // Set canvas to cover the entire page
    function setCanvasSize() {
      canvas.width = window.innerWidth;
      canvas.height = window.innerHeight;
    }
    setCanvasSize();
    window.addEventListener("resize", setCanvasSize);

    const snowflakes = [];
    const snowflakeShapes = ["‚ùÑ", "‚úª", "‚úº", "‚ú∫"]; // Snowflake symbols

    function createSnowflakes() {
      const total = 140; // Adjust the number of snowflakes
      for (let i = 0; i < total; i++) {
        snowflakes.push({
          x: Math.random() * canvas.width,
          y: Math.random() * canvas.height,
          size: Math.random() * 24 + 8, // Snowflake size
          speed: Math.random() * 1 + 0.5, // Snowflake speed
          shape: snowflakeShapes[Math.floor(Math.random() * snowflakeShapes.length)],
          opacity: Math.random() * 0.8 + 0.2,
        });
      }
    }

    function drawSnowflakes() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      snowflakes.forEach((flake) => {
        ctx.globalAlpha = flake.opacity;
        ctx.font = `${flake.size}px Arial`;
        ctx.fillStyle = "white";
        ctx.fillText(flake.shape, flake.x, flake.y);
      });
      updateSnowflakes();
    }

    function updateSnowflakes() {
      snowflakes.forEach((flake) => {
        flake.y += flake.speed;
        if (flake.y > canvas.height) {
          flake.y = 0;
          flake.x = Math.random() * canvas.width;
        }
      });
    }

    function animateSnowflakes() {
      drawSnowflakes();
      requestAnimationFrame(animateSnowflakes);
    }

    createSnowflakes();
    animateSnowflakes();
  });
  </script>
</body>
</html>
